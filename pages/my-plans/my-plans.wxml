<!--pages/my-plans/my-plans.wxml-->
<view class="plans-container">
  <view class="plans-header">
    <text class="header-title">æˆ‘çš„æ–¹æ¡ˆ</text>
    <text class="header-desc">å…±{{plans.length}}ä¸ªä¿å­˜çš„æ–¹æ¡ˆ</text>
  </view>

  <view class="plans-list">
    <block wx:for="{{plans}}" wx:key="id">
      <view class="plan-item {{item.level}}" bindtap="viewPlanDetail" data-plan="{{item}}">
        <view class="plan-header">
          <text class="plan-date">{{item.createDate}}</text>
          <text class="plan-level {{item.level}}">{{item.levelName}}</text>
        </view>
        <view class="plan-content">
          <text class="plan-score">è¯„ä¼°å¾—åˆ†ï¼š{{item.totalScore}}</text>
          <text class="plan-desc">{{item.description}}</text>
        </view>
        <view class="plan-stats">
          <view class="stat">
            <text class="stat-number">{{item.dietPlan.length}}</text>
            <text class="stat-label">é¥®é£Ÿå»ºè®®</text>
          </view>
          <view class="stat">
            <text class="stat-number">{{item.exercisePlan.length}}</text>
            <text class="stat-label">è¿åŠ¨æ–¹æ¡ˆ</text>
          </view>
          <view class="stat">
            <text class="stat-number">{{item.lifestylePlan.length}}</text>
            <text class="stat-label">ç”Ÿæ´»ä¹ æƒ¯</text>
          </view>
        </view>
        <view class="plan-actions">
          <button class="action-btn delete" bindtap="deletePlan" data-id="{{item.id}}" catchtap>åˆ é™¤</button>
          <button class="action-btn share" bindtap="sharePlan" data-plan="{{item}}" catchtap>åˆ†äº«</button>
        </view>
      </view>
    </block>
  </view>

  <view class="empty-state" wx:if="{{plans.length === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— ä¿å­˜çš„æ–¹æ¡ˆ</text>
    <text class="empty-desc">å¿«å»åˆ¶å®šä¸ªæ€§åŒ–å¹²é¢„æ–¹æ¡ˆå§ï¼</text>
    <button class="empty-btn" bindtap="goToIntervention">åˆ¶å®šæ–¹æ¡ˆ</button>
  </view>
</view>
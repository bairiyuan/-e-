<!--pages/records/records.wxml-->
<view class="records-container">
  <view class="records-header">
    <text class="header-title">é£é™©è¯„ä¼°è®°å½•</text>
    <text class="header-desc">å…±{{assessments.length}}æ¬¡è¯„ä¼°</text>
  </view>

  <view class="records-list">
    <block wx:for="{{assessments}}" wx:key="id">
      <view class="record-item {{item.level}}" bindtap="viewRecordDetail" data-record="{{item}}">
        <view class="record-header">
          <text class="record-date">{{item.date}}</text>
          <text class="record-level {{item.level}}">{{item.levelName}}</text>
        </view>
        <view class="record-content">
          <text class="record-score">å¾—åˆ†ï¼š{{item.totalScore}}</text>
          <text class="record-desc">{{item.description}}</text>
        </view>
        <view class="record-actions">
          <button class="delete-btn" bindtap="deleteRecord" data-id="{{item.id}}" catchtap>åˆ é™¤</button>
        </view>
      </view>
    </block>
  </view>

  <view class="empty-state" wx:if="{{assessments.length === 0}}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— è¯„ä¼°è®°å½•</text>
    <text class="empty-desc">å¿«å»è¿›è¡Œé£é™©è¯„ä¼°å§ï¼</text>
    <button class="empty-btn" bindtap="goToAssessment">å¼€å§‹è¯„ä¼°</button>
  </view>

  <view class="stats-section" wx:if="{{assessments.length > 0}}">
    <text class="stats-title">è¯„ä¼°ç»Ÿè®¡</text>
    <view class="stats-grid">
      <view class="stat-card">
        <text class="stat-number">{{assessments.length}}</text>
        <text class="stat-label">æ€»è¯„ä¼°æ¬¡æ•°</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{latestScore}}</text>
        <text class="stat-label">æœ€æ–°å¾—åˆ†</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{riskLevelCount.low}}</text>
        <text class="stat-label">ä½é£é™©</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{riskLevelCount.medium + riskLevelCount.high}}</text>
        <text class="stat-label">ä¸­é«˜é£é™©</text>
      </view>
    </view>
  </view>
</view>